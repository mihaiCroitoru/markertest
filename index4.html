<!DOCTYPE html>
<html>

    <head>
        <meta charset="UTF-8">
        <title>AR Image Detection</title>
        <script src="https://aframe.io/releases/1.6.0/aframe.min.js"></script>
        <script src="https://raw.githack.com/AR-js-org/AR.js/master/aframe/build/aframe-ar.js"></script>
        <script>
            document.addEventListener('DOMContentLoaded', function () {
                console.log('The DOM is fully loaded!');

                // Example of manipulating the DOM
                document.getElementById('myElement').style.color = 'red';

                // Example of making an AJAX request
                fetch('https://api.example.com/data')
                    .then(response => response.json())
                    .then(data => console.log(data))
                    .catch(error => console.error('Error:', error));
            });
        </script>
    </head>

    <body>
        <a-scene camera-controls>
            <!-- Display the user's camera -->
            <a-camera ref="camera" />
            <!-- Display the detected image marker (if any) -->
            <a-plane ref="marker" width="1" height="1" plane-material="cubemap: #fff" position="0 0 -5"></a-plane>
            <!-- Display the popup with questions and answers (if an image marker is detected) -->
            <a-popup id="popup" scale="2 2 2">
                <h1>AR Image Detection</h1>
                <p id="question">What is your favorite color?</p>
                <ul id="answers">
                    <li><button id="red">Red</button></li>
                    <li><button id="blue">Blue</button></li>
                    <li><button id="green">Green</button></li>
                </ul>
            </a-popup>
        </a-scene>
        <!-- Load the AR.js library and initialize the AR context -->
        <script type="module">
            ARJS.load();
            ARJS.initialize();
        </script>
        <!-- Define the image marker to detect -->
        <script>
            const MARKER_URL = 'targets.mind';
            let markerDetector;
            let camera;

            // Initialize the A-Frame scene
            window.addEventListener('DOMContentLoaded', () => {
                camera = document.getElementById('camera');
                markerDetector = new ARJS.Detector({
                    source: MARKER_URL,
                    detectOnLoad: true,
                    onDetected: (marker) => {
                        console.log(`Marker detected!`);
                        // Show the popup with questions and answers
                        document.getElementById('popup').className = 'visible';
                        document.getElementById('question').innerHTML = `You're looking at a ${marker.name} marker!`;

                    }
                });
            });

            // Handle user input (clicking on an answer button)
            document.addEventListener('click', (e) => {
                if (e.target.id === 'red' || e.target.id === 'blue' || e.target.id === 'green') {
                    console.log(`You chose ${e.target.textContent}!`);
                    // Hide the popup
                    document.getElementById('popup').className = '';
                }
            });
        </script>
    </body>

</html>